<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Our Forest Love Story ðŸŒ¿</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="story">

<div id="storyContainer"></div>

<script>
function getStoryData() {
  const params = new URLSearchParams(window.location.search);
  const encoded = params.get("data");

  if (!encoded) {
    document.getElementById("storyContainer").innerHTML =
      "<h2>No story found ðŸŒ¿</h2>";
    return;
  }

  try {
    const decoded = JSON.parse(
      decodeURIComponent(atob(encoded))
    );

    displayStory(decoded);

  } catch (error) {
    document.getElementById("storyContainer").innerHTML =
      "<h2>Invalid story link ðŸ’”</h2>";
  }
}

function displayStory(data) {
  const container = document.getElementById("storyContainer");

  let imagesHTML = "";

  if (data.images && data.images.length > 0) {
    data.images.forEach(img => {
      imagesHTML += `<img src="${img}" class="story-image">`;
    });
  }

  container.innerHTML = `
    <h1>${data.sender} ðŸ’š ${data.receiver}</h1>
    <p><strong>Date:</strong> ${data.date}</p>
    <p class="message">${data.message}</p>
    ${imagesHTML}
    <p class="footer">
      If you want to reply ðŸ’Œ<br>
      Contact: ${data.email}
    </p>
  `;
}

getStoryData();
</script>

</body>
</html>
